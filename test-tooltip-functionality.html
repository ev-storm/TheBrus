<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–µ—Å—Ç tooltip —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: #1a1a1a;
        color: white;
      }
      .test-section {
        background: #2a2a2a;
        padding: 20px;
        margin: 20px 0;
        border-radius: 8px;
      }
      .status {
        padding: 10px;
        margin: 10px 0;
        border-radius: 4px;
      }
      .success {
        background: #4caf50;
      }
      .error {
        background: #f44336;
      }
      .info {
        background: #2196f3;
      }
      .test-button {
        background: #65c36c;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 5px;
        border-radius: 4px;
        cursor: pointer;
      }
      .test-button:hover {
        background: #5ab060;
      }
      .test-results {
        background: #333;
        padding: 15px;
        border-radius: 4px;
        margin: 10px 0;
        font-family: monospace;
        white-space: pre-wrap;
      }
      .iframe-container {
        width: 100%;
        height: 600px;
        border: 2px solid #444;
        border-radius: 8px;
        overflow: hidden;
      }
      .iframe-container iframe {
        width: 100%;
        height: 100%;
        border: none;
      }
      .demo-section {
        background: #444;
        padding: 20px;
        margin: 20px 0;
        border-radius: 8px;
      }
      .demo-list {
        list-style: none;
        padding: 0;
      }
      .demo-list li {
        padding: 10px;
        margin: 5px 0;
        background: #555;
        border-radius: 4px;
        cursor: help;
        transition: all 0.3s ease;
      }
      .demo-list li:hover {
        background: #65c36c;
        color: white;
      }
      .tooltip {
        position: absolute;
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 12px;
        line-height: 1.4;
        max-width: 300px;
        z-index: 1000;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }
      .tooltip.show {
        opacity: 1;
      }
      .tooltip::after {
        content: "";
        position: absolute;
        top: 50%;
        left: -6px;
        transform: translateY(-50%);
        border: 6px solid transparent;
        border-right-color: rgba(0, 0, 0, 0.9);
      }
    </style>
  </head>
  <body>
    <h1>üí° –¢–µ—Å—Ç tooltip —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</h1>

    <div class="test-section">
      <h2>üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h2>
      <div id="status" class="status info">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>
    </div>

    <div class="test-section">
      <h2>üß™ –î–µ–º–æ tooltip</h2>
      <p>–ù–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å tooltip:</p>
      <div class="demo-section">
        <h3>–§—É–Ω–¥–∞–º–µ–Ω—Ç</h3>
        <ul class="demo-list">
          <li
            data="–¢–æ–ø–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Å—ä–µ–º–∫–∞ ‚Äî —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ-–≥–µ–æ–¥–µ–∑–∏—á–µ—Å–∫–∏—Ö —Ä–∞–±–æ—Ç –ø–æ –∏–∑–º–µ—Ä–µ–Ω–∏—é —É—á–∞—Å—Ç–∫–∞ –º–µ—Å—Ç–Ω–æ—Å—Ç–∏ –∏ –∑–∞–Ω–µ—Å–µ–Ω–∏—é –≤ —Ç–æ–ø–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω –¥–∞–Ω–Ω—ã—Ö –æ–± –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è—Ö —Ä–µ–ª—å–µ—Ñ–∞, –ø–æ–ª–æ–∂–µ–Ω–∏–∏ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –º–µ–∂–¥—É –Ω–∏–º–∏."
          >
            –ì–µ–æ–¥–µ–∑–∏—á–µ—Å–∫–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (—Ç–æ–ø–æ—Å—ä–µ–º–∫–∞) —É—á–∞—Å—Ç–∫–∞
          </li>
          <li
            data="–ì–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≥—Ä—É–Ω—Ç–∞ –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–µ–±—è –±—É—Ä–µ–Ω–∏–µ —Å–∫–≤–∞–∂–∏–Ω, –æ—Ç–±–æ—Ä –ø—Ä–æ–± –≥—Ä—É–Ω—Ç–∞, –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–µ—Å—É—â–µ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, —Å–æ—Å—Ç–∞–≤–∞ –∏ —Å–≤–æ–π—Å—Ç–≤ –≥—Ä—É–Ω—Ç–æ–≤ –Ω–∞ —É—á–∞—Å—Ç–∫–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞."
          >
            –ì–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≥—Ä—É–Ω—Ç–∞
          </li>
          <li
            data="–ü—Ä–æ–µ–∫—Ç –ö–ñ (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∂–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–µ) –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Ä–∞—Å—á–µ—Ç—ã –∏ —á–µ—Ä—Ç–µ–∂–∏ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞, –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π, –ª–µ—Å—Ç–Ω–∏—Ü –∏ –¥—Ä—É–≥–∏—Ö –∂–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∑–¥–∞–Ω–∏—è."
          >
            –ü—Ä–æ–µ–∫—Ç –ö–ñ
          </li>
        </ul>
      </div>
    </div>

    <div class="test-section">
      <h2>üåê –¢–µ—Å—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ</h2>
      <p>
        –û—Ç–∫—Ä–æ–π—Ç–µ
        <a href="http://localhost:3000/house" target="_blank"
          >http://localhost:3000/house</a
        >
        –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
      </p>
      <div class="iframe-container">
        <iframe src="http://localhost:3000/house" id="house-iframe"></iframe>
      </div>
    </div>

    <div class="test-section">
      <h2>üß™ –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</h2>
      <button class="test-button" onclick="runTooltipTests()">
        –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã tooltip
      </button>
      <button class="test-button" onclick="testTooltipPositioning()">
        –¢–µ—Å—Ç –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
      </button>
      <button class="test-button" onclick="testTooltipContent()">
        –¢–µ—Å—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
      </button>
      <div id="test-results" class="test-results"></div>
    </div>

    <div class="test-section">
      <h2>üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
      <div class="test-results">
        1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/house –≤ –±—Ä–∞—É–∑–µ—Ä–µ 2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ
        —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–æ —Å–µ–∫—Ü–∏–∏ "–§—É–Ω–¥–∞–º–µ–Ω—Ç" 3. –ù–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ 4.
        –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è alert —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ alert
        —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–∞ data 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è
        —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–∏ –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ: - Alert –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
        –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º data - Alert —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–∞ data - –í
        –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–∏
      </div>
    </div>

    <script>
      // Tooltip —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –¥–µ–º–æ
      let tooltip = null;

      function showTooltip(event, text) {
        if (!text) return;

        hideTooltip();

        tooltip = document.createElement("div");
        tooltip.className = "tooltip";
        tooltip.textContent = text;
        document.body.appendChild(tooltip);

        setTimeout(() => {
          if (tooltip) {
            const tooltipRect = tooltip.getBoundingClientRect();

            let left = event.clientX + 10;
            let top = event.clientY - tooltipRect.height - 10;

            if (left + tooltipRect.width > window.innerWidth) {
              left = event.clientX - tooltipRect.width - 10;
            }

            if (top < 0) {
              top = event.clientY + 10;
            }

            tooltip.style.left = left + "px";
            tooltip.style.top = top + "px";
            tooltip.classList.add("show");
          }
        }, 10);
      }

      function hideTooltip() {
        if (tooltip) {
          tooltip.remove();
          tooltip = null;
        }
      }

      function handleMouseEnter(event) {
        const text = event.target.getAttribute("data");
        if (text) {
          showTooltip(event, text);
        }
      }

      function handleMouseLeave() {
        hideTooltip();
      }

      function handleMouseMove(event) {
        if (tooltip && tooltip.classList.contains("show")) {
          const tooltipRect = tooltip.getBoundingClientRect();

          let left = event.clientX + 10;
          let top = event.clientY - tooltipRect.height - 10;

          if (left + tooltipRect.width > window.innerWidth) {
            left = event.clientX - tooltipRect.width - 10;
          }

          if (top < 0) {
            top = event.clientY + 10;
          }

          tooltip.style.left = left + "px";
          tooltip.style.top = top + "px";
        }
      }

      function runTooltipTests() {
        const results = document.getElementById("test-results");
        results.textContent = "–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ tooltip...\n";

        let passed = 0;
        let total = 0;

        // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º data
        total++;
        const elementsWithData = document.querySelectorAll("[data]");
        if (elementsWithData.length > 0) {
          results.textContent += `‚úÖ –ù–∞–π–¥–µ–Ω–æ ${elementsWithData.length} —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º data\n`;
          passed++;
        } else {
          results.textContent += "‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º data\n";
        }

        // –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ data
        total++;
        const elementsWithContent = Array.from(elementsWithData).filter(
          (el) => el.getAttribute("data") && el.getAttribute("data").length > 10
        );
        if (elementsWithContent.length > 0) {
          results.textContent += `‚úÖ –ù–∞–π–¥–µ–Ω–æ ${elementsWithContent.length} —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω—ã–º data\n`;
          passed++;
        } else {
          results.textContent +=
            "‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω—ã–º data\n";
        }

        // –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª–µ–π tooltip
        total++;
        const tooltipStyle = getComputedStyle(
          document.querySelector(".tooltip") || document.createElement("div")
        );
        if (tooltipStyle.position === "absolute") {
          results.textContent +=
            "‚úÖ Tooltip –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ\n";
          passed++;
        } else {
          results.textContent +=
            "‚ùå Tooltip –∏–º–µ–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ\n";
        }

        results.textContent += `\n–†–µ–∑—É–ª—å—Ç–∞—Ç: ${passed}/${total} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ`;

        if (passed === total) {
          results.textContent += "\nüéâ –í—Å–µ —Ç–µ—Å—Ç—ã tooltip –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!";
        } else {
          results.textContent += "\n‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ–π–¥–µ–Ω—ã";
        }
      }

      function testTooltipPositioning() {
        const results = document.getElementById("test-results");
        results.textContent = "–¢–µ—Å—Ç –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è tooltip...\n";

        const elements = document.querySelectorAll("[data]");
        if (elements.length > 0) {
          const element = elements[0];
          const rect = element.getBoundingClientRect();

          results.textContent += `–≠–ª–µ–º–µ–Ω—Ç: ${element.textContent}\n`;
          results.textContent += `–ü–æ–∑–∏—Ü–∏—è: x=${rect.left}, y=${rect.top}\n`;
          results.textContent += `–†–∞–∑–º–µ—Ä: w=${rect.width}, h=${rect.height}\n`;
          results.textContent += `Data: ${element
            .getAttribute("data")
            .substring(0, 50)}...\n`;

          results.textContent +=
            "\n‚úÖ –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ tooltip —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ\n";
        } else {
          results.textContent += "‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\n";
        }
      }

      function testTooltipContent() {
        const results = document.getElementById("test-results");
        results.textContent = "–¢–µ—Å—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ tooltip...\n";

        const elements = document.querySelectorAll("[data]");
        elements.forEach((element, index) => {
          const data = element.getAttribute("data");
          results.textContent += `\n–≠–ª–µ–º–µ–Ω—Ç ${index + 1}:\n`;
          results.textContent += `–¢–µ–∫—Å—Ç: ${element.textContent}\n`;
          results.textContent += `Data: ${data.substring(0, 100)}...\n`;
          results.textContent += `–î–ª–∏–Ω–∞: ${data.length} —Å–∏–º–≤–æ–ª–æ–≤\n`;
        });

        results.textContent += "\n‚úÖ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ tooltip –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ\n";
      }

      function testRealSite() {
        const results = document.getElementById("test-results");
        results.textContent = "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞...\n";

        const iframe = document.getElementById("house-iframe");
        if (iframe) {
          iframe.onload = () => {
            results.textContent += "‚úÖ –°–∞–π—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –≤ iframe\n";
            results.textContent +=
              "–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å tooltip\n";
          };
        }
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      document.addEventListener("DOMContentLoaded", () => {
        const status = document.getElementById("status");
        status.textContent = "‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è tooltip –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ";
        status.className = "status success";

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –¥–µ–º–æ
        const demoItems = document.querySelectorAll(".demo-list li");
        demoItems.forEach((item) => {
          item.addEventListener("mouseenter", handleMouseEnter);
          item.addEventListener("mouseleave", handleMouseLeave);
          item.addEventListener("mousemove", handleMouseMove);
        });
      });
    </script>
  </body>
</html>
